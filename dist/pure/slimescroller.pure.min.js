/*!
 * Slime touch scroller
 * v. 0.9.0 | https://github.com/wilddeer/SlimeScroller
 * Copyright Oleg Korsunsky | http://wd.dizaina.net/
 *
 * Depends on Event Burrito | https://github.com/wilddeer/Event-Burrito
 * MIT License
 */
function SlimeScroller(a,b){function c(a){var b=["Webkit","Moz","O","ms"],c=document.createElement("div");if(void 0!==c.style[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var d in b)if(void 0!==c.style[b[d]+a])return b[d]+a;return!1}function d(a,b,c,d){if(b=b.split(" "))for(var e=b.length-1;e>=0;e--)a.addEventListener?a.addEventListener(b[e],c,!!d):a.attachEvent("on"+b[e],c)}function e(a,b,c,d){if(b=b.split(" "))for(var e=b.length-1;e>=0;e--)a.removeEventListener?a.removeEventListener(b[e],c,!!d):a.detachEvent("on"+b[e],c)}function f(a,b){new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)||(a.className+=" "+b)}function g(a,b){a.className=a.className.replace(new RegExp("(\\s+|^)"+b+"(\\s+|$)","g")," ").replace(/^\s+|\s+$/g,"")}function h(a,b){var c=b?b+"ms":"";v.style[G.transition+"Duration"]=c,j(Math.floor(a))}function i(a,b){if(a=Math.floor(a),u&&clearInterval(u),!b)return void j(a);var c=+new Date,d=E;u=setInterval(function(){function e(a,b){return(b-a)*i+a}var f,g,h=+new Date-c,i=h/b,k=[0,.7,1,1];return i>=1?(j(a),void clearInterval(u)):(f=a-d,g=e(e(e(k[0],k[1]),e(k[1],k[2])),e(e(k[1],k[2]),e(k[2],k[3]))),void j(Math.floor(g*f+d)))},15)}function j(a){v.style[G.transform]="translateX("+a+"px)",E=a}function k(a){v.style.left=a+"px",E=a}function l(){return parseFloat(getComputedStyle(v)[G.transform].split(/,\s*/)[4])}function m(){return E}function n(a){a>0?a=0:y>a&&(a=y),h(a,C)}function o(a){n(-a.offsetLeft)}function p(a,b){var c=-a.offsetLeft+(b||B.borderPadding),d=a.offsetWidth+2*(b||B.borderPadding);c>E?n(c):E-x>c-d&&n(c-d+x)}function q(){var b;z=EventBurrito(a,{clickTolerance:5,start:function(){f(a,F.drag),h(b=l())},move:function(a,c,d){var e=b+d.x,f=Math.max(e,0)||Math.min(e-y,0);Math.abs(d.x)<6&&d.time<150||(d.x-=f-f/(Math.abs(f)/x*2+1),h(b+d.x))},end:function(b,c,f,i){if(g(a,F.drag),!(Math.abs(f.x)<6&&f.time<150)){i.x/=2;var j=i.x*Math.pow(Math.abs(i.x),.5)*C/2,k=E+j,l=Math.abs(Math.max(k,0)||Math.min(k-y,0)),m=Math.min(l/(C/70),150);console.log(l),console.log(m);var n=l-m,o=Math.max(0,C-n/(Math.abs(j)+1)*C);k>0?B.timer?(console.log("tmr"),o&&h(m,o),setTimeout(function(){h(0,C)},o)):!function(){function a(){h(0,D),e(v,"transitionend webkitTransitionEnd",a)}o?(h(m,o),d(v,"transitionend webkitTransitionEnd",a)):a()}():y>k?B.timer?(console.log("tmr"),o&&h(y-m,o),setTimeout(function(){h(y,C)},o)):!function(){function a(){h(y,D),e(v,"transitionend webkitTransitionEnd",a)}o?(h(y-m,o),d(v,"transitionend webkitTransitionEnd",a)):a()}():h(k,C)}},click:function(a){B.onClick(a)}})}function r(){s(),n(E)}function s(){x=a.offsetWidth,w=v.offsetWidth,y=x-w}function t(){(!G.transform||window.opera)&&(j=k),(!G.transition||window.opera)&&(h=i),G.transform&&!window.opera&&window.getComputedStyle||(l=m),v=a.children[0];for(var b=v.getElementsByTagName("img"),c=b.length-1;c>=0;c--)d(v,"load error",r);d(a,"focus",function(b){a.scrollLeft=0,setTimeout(function(){a.scrollLeft=0},0),b.target&&p(b.target)},!0),f(v,F.scroller),f(a,F.active),g(a,F.inactive),s(),q(),d(window,"resize",r),d(window,"orientationchange",r)}var u,v,w,x,y,z,A=function(){},B=b||{},C=500,D=300,E=0;B.cssPrefix=B.cssPrefix||"",B.borderPadding=B.borderPadding||24,B.onClick=B.onClick||A;var F={inactive:B.cssPrefix+"inactive",active:B.cssPrefix+"active",drag:B.cssPrefix+"drag",scroller:B.cssPrefix+"scroller"},G={transform:c("transform"),transition:c("transition")};return t(),{getClicksAllowed:function(){return z.getClicksAllowed()},scrollTo:n,scrollToElement:o,moveElementToViewport:p}}